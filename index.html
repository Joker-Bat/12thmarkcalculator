<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Shanmugam M" />
    <title>12th Mark Calculation</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div class="container12th">
      <h1 class="title">12th Mark Calculation</h1>
      <form class="form__list12th" id="formList12th">
        <fieldset class="ten">
          <legend>10th Mark</legend>
          <!-- Tamil -->
          <div class="input__group">
            <label for="tenTamil">Tamil: </label>
            <div class="input">
              <input
                type="number"
                id="tenTamil"
                placeholder="Enter Tamil mark..."
                class="tenthmarks"
                min="1"
                max="100"
                required
              />
              <span>/ 100</span>
            </div>
          </div>
          <!-- English -->
          <div class="input__group">
            <label for="tenEnglish">English: </label>
            <div class="input">
              <input
                type="number"
                id="tenEnglish"
                placeholder="Enter English mark..."
                class="tenthmarks"
                min="1"
                max="100"
                required
              />
              <span>/ 100</span>
            </div>
          </div>
          <!-- Maths -->
          <div class="input__group">
            <label for="tenMaths">Maths: </label>
            <div class="input">
              <input
                type="number"
                id="tenMaths"
                placeholder="Enter Maths mark..."
                class="tenthmarks"
                min="1"
                max="100"
                required
              />
              <span>/ 100</span>
            </div>
          </div>
          <!-- Science -->
          <div class="input__group">
            <label for="tenScience">Science: </label>
            <div class="input">
              <input
                type="number"
                id="tenScience"
                placeholder="Enter Science mark..."
                class="tenthmarks"
                min="1"
                max="100"
                required
              />
              <span>/ 100</span>
            </div>
          </div>
          <!-- Social -->
          <div class="input__group">
            <label for="tenSocial">Social Science: </label>
            <div class="input">
              <input
                type="number"
                id="tenSocial"
                placeholder="Enter Social Science mark..."
                class="tenthmarks"
                min="1"
                max="100"
                required
              />
              <span>/ 100</span>
            </div>
          </div>
        </fieldset>

        <!-- Eleven Std -->
        <fieldset class="eleven">
          <legend>11th Mark</legend>
          <!-- Tamil -->
          <div class="input__group">
            <label for="elevenTamil">Tamil: </label>
            <div class="input">
              <input
                type="number"
                id="elevenTamil"
                placeholder="Enter Tamil mark..."
                class="eleventhmarks"
                min="1"
                max="90"
                required
              />
              <span>/ 90</span>
            </div>
          </div>
          <!-- English -->
          <div class="input__group">
            <label for="elevenEnglish">English: </label>
            <div class="input">
              <input
                type="number"
                id="elevenEnglish"
                placeholder="Enter English mark..."
                class="eleventhmarks"
                min="1"
                max="90"
                required
              />
              <span>/ 90</span>
            </div>
          </div>
          <!-- Maths -->
          <div class="input__group">
            <label for="elevenMaths">Maths: </label>
            <div class="input">
              <input
                type="number"
                id="elevenMaths"
                placeholder="Enter Maths mark..."
                class="eleventhmarks"
                min="1"
                max="90"
                required
              />
              <span>/ 90</span>
            </div>
          </div>
          <!-- Physics -->
          <div class="input__group">
            <label for="elevenPhysics">Physics: </label>
            <div class="input">
              <input
                type="number"
                id="elevenPhysics"
                placeholder="Enter Physics mark..."
                class="eleventhmarks"
                min="1"
                max="70"
                required
              />
              <span>/ 70</span>
            </div>
          </div>
          <!-- Chemistry -->
          <div class="input__group">
            <label for="elevenChemistry">Chemistry: </label>
            <div class="input">
              <input
                type="number"
                id="elevenChemistry"
                placeholder="Enter Chemistry mark..."
                class="eleventhmarks"
                min="1"
                max="70"
                required
              />
              <span>/ 70</span>
            </div>
          </div>

          <!-- Biology -->
          <div class="input__group">
            <label for="elevenBiology">Biology: </label>
            <div class="input">
              <input
                type="number"
                id="elevenBiology"
                placeholder="Enter Biology mark..."
                class="eleventhmarks"
                min="1"
                max="70"
                required
              />
              <span>/ 70</span>
            </div>
          </div>
        </fieldset>

        <!-- Twelfth Std -->
        <fieldset class="eleven">
          <legend>12th Mark</legend>
          <!-- Tamil -->
          <div class="input__group">
            <label for="twelfthTamil">Tamil: </label>
            <div class="input">
              <input
                type="number"
                id="twelfthTamil"
                placeholder="Enter Tamil mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>
          <!-- English -->
          <div class="input__group">
            <label for="twelfthEnglish">English: </label>
            <div class="input">
              <input
                type="number"
                id="twelfthEnglish"
                placeholder="Enter English mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>
          <!-- Maths -->
          <div class="input__group">
            <label for="twelfthMaths">Maths: </label>
            <div class="input">
              <input
                type="number"
                id="twelfthMaths"
                placeholder="Enter Maths mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>
          <!-- Physics -->
          <div class="input__group">
            <label for="twelfthPhysics">Physics: </label>
            <div class="input">
              <input
                type="number"
                placeholder="Enter Physics mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>
          <!-- Chemistry -->
          <div class="input__group">
            <label for="twelfthChemistry">Chemistry: </label>
            <div class="input">
              <input
                type="number"
                id="twelfthChemistry"
                placeholder="Enter Chemistry mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>

          <!-- Biology -->
          <div class="input__group">
            <label for="twelfthBiology">Biology: </label>
            <div class="input">
              <input
                type="number"
                id="twelfthBiology"
                placeholder="Enter Biology mark..."
                class="twelfthmarks"
                min="1"
                max="30"
                value="30"
                required
              />
              <span>/ 30</span>
            </div>
          </div>
        </fieldset>

        <button type="submit" class="submit__btn">Get Result</button>
      </form>

      <div class="resultPage" id="resultPage">
        <h1>Your Result</h1>
        <div class="result__group">
          <p><strong>Tamil: </strong></p>
          <p id="tamilMark">0</p>
        </div>
        <div class="result__group">
          <p><strong>English: </strong></p>
          <p id="englishMark">0</p>
        </div>
        <div class="result__group">
          <p><strong>Maths: </strong></p>
          <p id="mathsMark">0</p>
        </div>
        <div class="result__group">
          <p><strong>Physics: </strong></p>
          <p id="physicsMark">0</p>
        </div>
        <div class="result__group">
          <p><strong>Chemistry: </strong></p>
          <p id="chemistryMark">0</p>
        </div>
        <div class="result__group">
          <p><strong>Biology: </strong></p>
          <p id="biologyMark">0</p>
        </div>
        <div class="result__group total">
          <p><strong>Total: </strong></p>
          <p id="totalMark">0</p>
        </div>

        <button class="tryagain__btn" id="tryAgain">Try again</button>
      </div>
    </div>

    <footer>
      <p>
        Made by
        <a href="https://github.com/Joker-Bat" target="_blank">SilveDev</a>
      </p>
    </footer>

    <script>
      // Elements
      const form = document.getElementById("formList12th");
      const tenthMarks = document.querySelectorAll(".tenthmarks");
      const eleventhMarks = document.querySelectorAll(".eleventhmarks");
      const twelfthMarks = document.querySelectorAll(".twelfthmarks");
      const resultPage = document.getElementById("resultPage");
      const tryAgain = document.getElementById("tryAgain");
      const tamilMark = document.getElementById("tamilMark"),
        englishMark = document.getElementById("englishMark"),
        mathsMark = document.getElementById("mathsMark"),
        physicsMark = document.getElementById("physicsMark"),
        chemistryMark = document.getElementById("chemistryMark"),
        biologyMark = document.getElementById("biologyMark"),
        totalMark = document.getElementById("totalMark");

      // Form submit event
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        resultPage.classList.add("show");
        const _10thMarks = get10thMarks();
        const _11thMarks = get11thMarks();
        const _12thMarks = get12thMarks();
        calculateMarks(_10thMarks, _11thMarks, _12thMarks);
        window.scrollTo(0, 0);
      });

      tryAgain.addEventListener("click", () => {
        tenthMarks.forEach((item) => (item.value = ""));
        eleventhMarks.forEach((item) => (item.value = ""));
        twelfthMarks.forEach((item) => (item.value = 30));
        tamilMark.innerText = 0;
        englishMark.innerText = 0;
        mathsMark.innerText = 0;
        physicsMark.innerText = 0;
        chemistryMark.innerText = 0;
        biologyMark.innerText = 0;
        resultPage.classList.remove("show");
        window.scrollTo(0, 0);
      });

      function get10thMarks() {
        const _10thMarks = [];
        tenthMarks.forEach((item) => _10thMarks.push(item.value));

        // Sort and get highest 3 marks
        _10thMarks.sort((a, b) => b - a);
        const best3Marks = _10thMarks.slice(0, 3);

        const best3MarksTotal = best3Marks.reduce(
          (acc, cur) => (acc += +cur),
          0
        );

        let _10thMarksFor50 = (best3MarksTotal / 3).toFixed(2);

        _10thMarksFor50 = getDecimalCorrectedValue(_10thMarksFor50);

        return (_10thMarksFor50 * 0.5).toFixed(2);
      }

      function get11thMarks() {
        const _11thMarks = [];
        // If mark less then 35 then make it 35
        eleventhMarks.forEach((item) =>
          _11thMarks.push(item.value < 35 ? 35 : item.value)
        );
        const theoryMarks = _11thMarks.slice(0, 3);
        const coreMarks = _11thMarks.slice(3);
        const theoryMarksFor20 = theoryMarks.map((item) => {
          const for100 = ((item / 90) * 100).toFixed(2);
          const for20 = for100 * 0.2;
          return getDecimalCorrectedValue(for20);
        });
        const coreMarksFor20 = coreMarks.map((item) => {
          const for100 = ((item / 70) * 100).toFixed(2);
          const for20 = for100 * 0.2;
          return getDecimalCorrectedValue(for20);
        });
        return { theoryMarksFor20, coreMarksFor20 };
      }

      function get12thMarks() {
        const _12Marks = [];
        twelfthMarks.forEach((item) => _12Marks.push(+item.value));
        return _12Marks;
      }

      function calculateMarks(_10, _11, _12) {
        const { theoryMarksFor20, coreMarksFor20 } = _11;
        // Calculate values
        const tamil =
          parseInt(_10) + parseInt(theoryMarksFor20[0]) + parseInt(_12[0]);
        const english =
          parseInt(_10) + parseInt(theoryMarksFor20[1]) + parseInt(_12[1]);
        const maths =
          parseInt(_10) + parseInt(theoryMarksFor20[2]) + parseInt(_12[2]);
        const physics =
          parseInt(_10) + parseInt(coreMarksFor20[0]) + parseInt(_12[3]);
        const chemistry =
          parseInt(_10) + parseInt(coreMarksFor20[1]) + parseInt(_12[4]);
        const biology =
          parseInt(_10) + parseInt(coreMarksFor20[2]) + parseInt(_12[5]);

        // Put values to UI
        tamilMark.innerText = tamil;
        englishMark.innerText = english;
        mathsMark.innerText = maths;
        physicsMark.innerText = physics;
        chemistryMark.innerText = chemistry;
        biologyMark.innerText = biology;
        totalMark.innerText =
          tamil + english + maths + physics + chemistry + biology;
      }

      // Helper functions
      function ceilNumber(num) {
        return Math.ceil(num);
      }

      function floorNumber(num) {
        return Math.floor(num);
      }
      // Get correct value based on Decimal
      function getDecimalCorrectedValue(num) {
        let decimalPoint = num.toString().split(".")[1];
        // Only if it has decimal value
        if (decimalPoint) {
          decimalPoint = decimalPoint.toString().substring(0, 2);
        }
        if (decimalPoint > 51) num = ceilNumber(num);
        else num = floorNumber(num);

        return num;
      }
    </script>
  </body>
</html>
